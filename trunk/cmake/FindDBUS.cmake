FIND_PATH( DBUS_INCLUDE_DIR dbus/dbus.h PATHS /usr/include/dbus-1.0 /usr/local/include/dbus-1.0 )
FIND_PATH( DBUS_GLIB_INCLUDE_DIR dbus/dbus-glib.h PATHS /usr/include/dbus-1.0 /usr/local/include/dbus-1.0 )
FIND_PATH( DBUS_INCLUDE_LIB_DIR dbus/dbus-arch-deps.h PATHS /usr/lib/dbus-1.0/include /usr/local/lib/dbus-1.0/include )
FIND_LIBRARY( DBUS_LIBRARY NAMES dbus-1 PATHS /usr/lib /usr/local/lib )
FIND_LIBRARY( DBUS_GLIB_LIBRARY NAMES dbus-glib-1 PATHS /usr/lib /usr/local/lib )

IF( DBUS_INCLUDE_DIR AND DBUS_INCLUDE_LIB_DIR AND DBUS_LIBRARY )
   SET( DBUS_FOUND TRUE )
ENDIF( DBUS_INCLUDE_DIR AND DBUS_INCLUDE_LIB_DIR AND DBUS_LIBRARY )

IF( DBUS_INCLUDE_DIR AND DBUS_INCLUDE_LIB_DIR )
   SET( DBUS_INCLUDES ${DBUS_INCLUDE_DIR} ${DBUS_INCLUDE_LIB_DIR} )
   SET( DBUS_LIBRARIES ${DBUS_LIBRARY} )
ENDIF( DBUS_INCLUDE_DIR AND DBUS_INCLUDE_LIB_DIR )

IF( DBUS_GLIB_INCLUDE_DIR AND DBUS_GLIB_LIBRARY )
   SET( DBUS_GLIB_FOUND TRUE )
ENDIF( DBUS_GLIB_INCLUDE_DIR AND DBUS_GLIB_LIBRARY )

IF( DBUS_GLIB_FOUND )
   IF( NOT dbus-glib_FIND_QUIETLY )
      MESSAGE( STATUS "Found dbus-glib: ${DBUS_GLIB_LIBRARY}" )
   ENDIF( NOT dbus-glib_FIND_QUIETLY )
ELSE( DBUS_GLIB__FOUND )
   IF( dbus-glib_FIND_REQUIRED )
      MESSAGE( FATAL_ERROR "Could not find dbus-glib" )
   ENDIF( dbus-glib_FIND_REQUIRED )
ENDIF( DBUS_GLIB_FOUND )

IF( DBUS_FOUND )
   IF( NOT dbus_FIND_QUIETLY )
      MESSAGE( STATUS "Found dbus: ${DBUS_LIBRARIES}" )
   ENDIF( NOT dbus_FIND_QUIETLY )
ELSE( DBUS_FOUND )
   IF( dbus_FIND_REQUIRED )
      MESSAGE( FATAL_ERROR "Could not find dbus" )
   ENDIF( dbus_FIND_REQUIRED )
ENDIF( DBUS_FOUND )
